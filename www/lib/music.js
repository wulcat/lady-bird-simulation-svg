define(['wave','notes'],(Wave,Notes)=>{
    return class Music {
        constructor(draw,body) {
            let group = draw.group()
            let waveEmitter = draw.path('M523.529,668.788l-0.002,0.001c1.574-1.043,3.184-2.216,4.831-3.544l0.637-2.244 c-9.672-15.333-1.496-35.001-1.496-35.001s-15.577-5.668-12.832-33.842s-15.831-41.504-24.333-52.825s-23.977-8.906-23.977-8.906 s4.774,4.674,0,11.24c0,0,13.81-7.356,21.143,3.333s19.833,25.666,18.833,40s-1.765,21.985-9.832,28s-19.395,14.958-19.395,14.958 L477,659c0,0,12.365,22.066,35,15.352c1.334,6.686,0.569,27.889,0.603,44.315s6.73,22.666,6.73,22.666 c3.666-32.334,31-37.65,31-37.65C512.603,697.001,523.529,668.788,523.529,668.788z').fill("#00E198")

            let waveEmitterBackLayer = draw.path("M518,738.921l1.333,2.412c0,0,21.666-8.135,31-37.65l-7.124,0.859 c0,0-5.624,2.875-5.833,3.125S520.166,715.176,518,738.921z").fill("#089E68")
            let button = draw.polygon("497,640.101 497,651.149 508.457,645.625").stroke({width:5 , linejoin:"round"})
            
            group.add(waveEmitter)
            group.add(waveEmitterBackLayer)
            group.add(button)

            this.music = group
            this.wires = []

            this.createWireframes(draw , group)
            this.notes = new Notes(draw , body)
        }
        move(x,y) {
            this.music.move(x+165,y-175)
        }

        Start(draw) {
            this.notes.crotchet.crotchet.Start(draw)
            this.notes.semibreve.semibreve.Start(draw)
            this.notes.minim.minim.Start(draw)
        }
        createWireframes(draw , parent) {
            let wireGroup01 = draw.group()
            let wireGroup02 = draw.group()
            let wireGroup03 = draw.group()
            let wireGroup04 = draw.group()

            let wire01 , node01 , wire02 , node02 , wire03 , node03 , wire04 , node04
            
            wireGroup01.add(wire01 = draw.path("M523.047,745.979 c3.57,4.603,8.531,9.797,13.469,11.042c9.308,2.348,13.585,7.938,20.942,16.271s21.965,9.742,32.024-6.531 s22.675-11.828,30.754-13.398s13.579-11.766,12.579-17.668s3-11.957,12.5-17.93s21.432-1.656,21.466-14.814 s7.904-14.286,13.887-25.11s4.969-19.369,4.324-22.462c-3.608-17.314,7.323-33.923,19.099-33.923 c8.171,0,9.392-19.163,3.392-31.163s-16.945-6.632-13.333-22.666s17.43-28.696,4.048-37.396s-8.198-17.916-9.79-29.594 s-17.982-31.011-17.982-31.011s-3.06-7.405-5.854-19.578s-15.334-17.089-20.545-18.422s8.314-19.148-6.448-27.574 s-24.069,6.551-36.083-11.604s-10.384-7.755-18.865,0.378s-19.547-4.08-30.88-5.906s-13.722,0.631-16.125,3.705 c-2.794,3.574-3.704,10.222-16.792,4.875c-5.579-2.279-8.958-2-14.048,7.75"))

            

            node01 = draw.path("M513.476,740.282c-1.304,0.939-1.596,2.748-0.655,4.052c0.378,0.525,0.904,0.886,1.478,1.064 l9.819,1.588c-0.052,0.217-0.036,0.442,0.05,0.646l-8.562,3.272l-0.697,0.267c-0.996,0.542-1.623,1.644-1.492,2.853 c0.153,1.605,1.578,2.766,3.171,2.594c0.631-0.07,1.17-0.309,1.628-0.7l0.019-0.014l0.579-0.712l0.028-0.049l0.022-0.049 l0.024-0.046l5.659-6.892c0.166,0.146,0.391,0.253,0.61,0.271l-1.59,9.785c0.01,0.142,0.009,0.261,0.021,0.398 c0.172,1.593,1.599,2.754,3.191,2.582c1.592-0.171,2.766-1.581,2.596-3.174c-0.014-0.139-0.041-0.266-0.073-0.39l-0.014-0.02 L529,756.842l-0.043-0.059l-0.008-0.052l-3.149-8.354c0.111-0.05,0.203-0.087,0.3-0.156c0.1-0.071,0.162-0.146,0.244-0.237 l7.074,5.79l0.577,0.472c0.108,0.068,0.218,0.138,0.346,0.192c1.477,0.652,3.184-0.016,3.85-1.473s0.016-3.178-1.46-3.83 c-0.128-0.056-0.243-0.091-0.371-0.146l-0.383-0.079l-9.381-1.521c0.053-0.215,0.038-0.441-0.051-0.646l8.521-3.243l0.73-0.26 l0.038-0.028c0.092-0.037,0.189-0.107,0.286-0.177c1.305-0.941,1.585-2.77,0.645-4.073c-0.927-1.285-2.75-1.598-4.055-0.657 c-0.116,0.084-0.214,0.154-0.298,0.243l-0.039,0.028l-0.023,0.049l-0.325,0.411l-0.089,0.122l-5.782,7.041 c-0.165-0.146-0.376-0.232-0.597-0.252l1.483-9.146l0.081-0.503c0.09-1.189-0.565-2.344-1.703-2.855 c-1.457-0.666-3.178-0.018-3.83,1.459c-0.271,0.61-0.339,1.253-0.198,1.858l0.015,0.021l0.266,0.696l3.243,8.52 c-0.11,0.051-0.203,0.086-0.302,0.157c-0.097,0.069-0.16,0.146-0.243,0.235l-7.128-5.78l-0.056-0.077l-0.488-0.389 C515.71,739.558,514.449,739.58,513.476,740.282z")

            

            wireGroup02.add(wire02 = draw.path("M551.342,709.855 c2.736,3.916,5.48,9.386,6.116,16.104c1.357,14.333,21.803,4.833,22.33,2.333s8.027-7,15.277-4.5s21.59-3.055,22.17-8.027 s10.48-9.712,16.08-12.79s17.681-6.76,16.5-16.324s5.193-16.868,11.347-22.113s14.368-11.724,13.261-20.234 s0.686-10.706,3.393-21.604s7.749-19.07,3.568-26.906s-0.648-21.471,2.392-26.235s-0.323-18.37-2.392-24.067 s-7.225-11.565-2.558-20.27s3.204-22.928-4.403-30.928s-7.902-8-8.505-18.5s-0.358-12.642-5.48-20.321 s-8.206-12.955-6.622-20.488s-1.354-9.953-9.789-13.691s-9.588-7.054-12.256-11.757s-10.83-1.351-14.535-7.484 s-3.936-12.657-11.678-15.208s-8.482,4.521-16.612,0.235s-10.498,0.269-15.615,2.932s-14.957-5.183-19.08,0.49 c-7.927,10.907-13.616-7.808-17.025,4.742c-1.189,4.378-5.447,5.254-7.225,5.258c-6.387,0.012-11.013-3.409-19.438,6.875"))

            

            node02 = draw.path("M557.193,718.183 562.314,707.715 560.79,705.449 555.669,715.918 554.146,713.652 559.267,703.185 557.741,700.917 552.621,711.387 551.097,709.121 556.217,698.651 554.692,696.386 549.572,706.855 548.014,704.537 546.039,705.865 547.599,708.184 535.972,708.98 537.496,711.246 549.123,710.449 550.647,712.715 539.02,713.512 540.545,715.779 552.172,714.979 553.695,717.245 542.069,718.045 543.594,720.311 555.22,719.511")

            wireGroup03.add(wire03 = draw.path("M530.771,727.847 c3.52,2.908,6.785,6.809,7.366,11.528c1.344,10.917,19.148,21.583,28.246,14.917s20.928-7.242,28.682-7.203 s24.399-3.028,22.17-14.511s9.926-12.436,16.586-18.038s24.514-10.325,23.324-19.386s-10.822-11.698,4.017-20.862 s25.81-13.212,19.506-24.688s3.432-28.646,8.456-32.646s13.122-17.018,9.073-21.509s11.285-14.629,6.618-23.894 s-9.894-16.164-13.611-22.959s11.042-22.306,6.993-31.639c-4.049-9.333-16.042-25.797-23.774-28.667s1.855-23.088-3.998-30.667 s-21.039-0.818-24.176-11.09s6.707-28.863,2.566-30.243s-20.413-0.851-23.648-4.757s5.844-21.243-10.254-19.91 s-15.341,7.88-20.654,2.667s-25.827-15.56-36.998,0.202c-7.708,10.875-8.782,6.447-16.843,2.506 c-6.939-3.393-12.965,2.535-19.146,7.5c-6.5,5.222-9.953-6.406-12.599,0.594"))

            
        
            node03 = draw.group()
            node03.add(draw.path("M527.733,727.672c-4.131-0.961-8.459-0.989-12.608-0.283l11.313,12.332 c4.318-0.91,8.882-0.347,13.108,0.828L527.733,727.672z"))
            node03.add(draw.path("M539.547,740.549c-0.856-4.314-0.846-8.878,0.304-13.132l-11.287-12.304 c-1.066,4.174-1.456,8.383-0.83,12.559L539.547,740.549z"))
            node03.add(draw.path("M527.097,740.438c4.318-0.908,8.881-0.347,13.107,0.827c-0.856-4.313-0.844-8.876,0.305-13.131 l-1.519-1.655c-1.063,4.177-1.455,8.385-0.827,12.562c-4.132-0.962-8.462-0.992-12.608-0.283L527.097,740.438z"))
            node03.add(draw.path("M523.437,736.448c4.316-0.911,8.881-0.348,13.104,0.824c-0.855-4.313-0.841-8.873,0.308-13.129 l-1.519-1.654c-1.065,4.174-1.456,8.383-0.83,12.559c-4.13-0.961-8.459-0.989-12.607-0.282L523.437,736.448z"))
            node03.add(draw.path("M519.773,732.456c4.318-0.91,8.882-0.348,13.105,0.824c-0.856-4.313-0.841-8.874,0.307-13.129 l-1.519-1.655c-1.065,4.175-1.455,8.384-0.829,12.56c-4.131-0.961-8.459-0.989-12.609-0.283L519.773,732.456z"))
            node03.add(draw.path("M516.112,728.465c4.316-0.911,8.88-0.349,13.105,0.824c-0.858-4.315-0.843-8.875,0.307-13.129 l-1.52-1.656c-1.066,4.175-1.456,8.384-0.829,12.561c-4.132-0.962-8.458-0.989-12.608-0.283L516.112,728.465z"))
            

            // Create Wire , get reference
            wireGroup04.add(wire04 = draw.path("M534.248,716.472 c7.418,4.672,23.21,16.662,23.21,34.069c0,22.751,2.833,17.084,11.095,11.751s9.983-27.862,22.456-26.598 s24.403,19.93,22.771,6.931s-0.468-27.774,11.387-23s24.989-0.722,20.981-9.923s3.05-16.074,10.191-17.742 s21.329-13,18.083-18.334s-12.774-22.688,0.476-21.011s15.046,1.882,14.226-8.989s-6.357-28.667,0-26.667 s23.023,1.433,13.69-9.617s-22.628-10.471-13.69-18.383s12.983-13.459,4.391-17.489s-7.904-7.288-5.107-15.08 s0.317-23.148-4.632-26.159s-13.701,1.565-8.004-7.101s14.083-20.815,4.896-22.493s-14.75,6.774-14.75-8.035 s-1.606-21.947-4.756-22.976s3.533-20.854,2.067-23.518s-14.642,0.168-17.603-4.479s2.277-13.373-1.601-15.355 s-8.437-1.957-8.021-8.214s3.084-15.607-2.856-14.009s-8.94,7.813-12.634-2.341s-5.608-9.508-10.32-5.463 s-10.445,6.139-12.38,0.031s-8.961-9.883-12.813-7.435s-0.319,11.214-8.542,4.84s-6.782-13.622-9.213-4.84 s-6.915,12.552-10.673,8.333s-3.425-12.218-6.425-5.551s-8.221,12.816-12,10.333c-2.141-1.406-6.211-13.016-16.877-6.356 c-10.398,6.493-15.938-4.606-18.271,4.811"))
            

            // Draw the nodes - START node
            node04 = draw.group()
            node04.add(draw.path("M534.636,715.663c-0.787-1.969-1.128-4.106-1.093-6.21l6.95,4.659 c-0.123,2.203,0.5,4.416,1.399,6.416L534.636,715.663z"))
            node04.add(draw.path("M541.893,720.528c-2.197-0.098-4.451,0.254-6.467,1.144l-6.935-4.649 c1.982-0.843,4.033-1.354,6.145-1.359L541.893,720.528z"))
            node04.add(draw.path("M540.897,714.384c-0.123,2.203,0.499,4.416,1.399,6.416c-2.197-0.098-4.451,0.254-6.468,1.143 l-0.933-0.626c1.984-0.841,4.034-1.353,6.146-1.357c-0.788-1.97-1.13-4.107-1.093-6.211L540.897,714.384z"))
            node04.add(draw.path("M538.648,712.876c-0.124,2.202,0.5,4.416,1.398,6.415c-2.197-0.098-4.449,0.255-6.466,1.144 l-0.933-0.625c1.982-0.843,4.033-1.354,6.145-1.359c-0.787-1.97-1.129-4.106-1.093-6.21L538.648,712.876z").fill("#4AFB00"))
            node04.add(draw.path("M536.398,711.367c-0.124,2.203,0.5,4.416,1.398,6.415c-2.196-0.097-4.449,0.255-6.466,1.144 l-0.933-0.625c1.982-0.842,4.033-1.354,6.145-1.359c-0.787-1.969-1.129-4.105-1.093-6.21L536.398,711.367z").fill("#4AFB00"))
            node04.add(draw.path("M534.149,709.859c-0.124,2.202,0.499,4.416,1.397,6.415c-2.197-0.098-4.449,0.254-6.465,1.144 l-0.934-0.626c1.982-0.842,4.033-1.353,6.145-1.358c-0.787-1.97-1.128-4.106-1.093-6.211L534.149,709.859z").fill("#4AFB00"))

            // Draw the nodes - END node


            // Set Properties
            wire01.fill("none").stroke({width:2 , linecap:"round" , color:"#4afb00"})
            wire02.fill("none").stroke({width:2 , linecap:"round" , color:"#4AFB00"})
            wire03.fill("none").stroke({width:2 , linecap:"round" , color:"#BBFF00"})
            wire04.fill("none").stroke({width:2 , linecap:"round" , color:"#4AFB00" })

            node01.fill("#4afb00")
            node02.fill("#4AFB00")
            node03.get(0).fill("#E7FFA6")
            node03.get(1).fill("#D6FF66")
            node03.get(2).fill("#80ff00")
            node03.get(3).fill("#80ff00")
            node03.get(4).fill("#80ff00")
            node03.get(5).fill("#80ff00")
            node04.get(0).fill("#92FD66")
            node04.get(1).fill("#C0FEA6")
            node04.get(2).fill("#4AFB00")
            node04.get(3).fill("#4AFB00")
            node04.get(4).fill("#4AFB00")
            node04.get(5).fill("#4AFB00")

            // Creating references and organizing to groups
            wireGroup01.add(node01)
            wireGroup02.add(node02)
            wireGroup03.add(node03)
            wireGroup04.add(node04)

            this.wires.push(wire01)
            this.wires.push(wire02)
            this.wires.push(wire03)
            this.wires.push(wire04)

            parent.add(wireGroup01)
            parent.add(wireGroup02)
            parent.add(wireGroup03)
            parent.add(wireGroup04)
        }
    }
})